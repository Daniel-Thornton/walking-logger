<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Walk Logger</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="images/favicon.png" type="image/png">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Walking Logger">
    <meta name="mobile-web-app-capable" content="yes">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Mobile-friendly header -->
    <div class="app-header">
        <div class="header-content">
            <div class="app-icon">üö∂&#xFE0E;</div>
            <div class="app-title">Walk Logger</div>
            <div class="user-controls">
                <button class="btn btn-login" id="loginBtn">üë§&#xFE0E; Login</button>
                <button class="btn btn-login" id="logoutBtn" style="display: none;">üîê&#xFE0E; Logout</button>
            </div>
        </div>
    </div>

    <div class="container">
        <header class="header">
            <div class="banner-container">
                <img src="images/banner.bmp" alt="Walking Logger" class="banner-image">
                <div class="streak-counter">
                    <div class="streak-icon">üî•</div>
                    <div class="streak-info">
                        <div class="streak-value" id="bannerCurrentStreak">0</div>
                        <div class="streak-label">Day Streak</div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Tab Navigation -->
        <nav class="tab-nav">
            <button class="tab-btn active" data-tab="log">üñãÔ∏è Log Walk</button>
            <button class="tab-btn" data-tab="visualizations">üìä Charts</button>
            <button class="tab-btn" data-tab="leaderboard">ü•á Leaderboard</button>
            <button class="tab-btn" data-tab="help">‚ÑπÔ∏è Help</button>
        </nav>

        <main class="main-content">
            <!-- Login/Registration Modal -->
            <div id="authModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h2 id="authTitle">Login to Sync Data</h2>
                        <button class="modal-close" id="closeAuthModal">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form id="authForm">
                            <div class="form-group">
                                <label for="email">Email:</label>
                                <input type="email" id="email" name="email" required>
                            </div>
                            <div class="form-group">
                                <label for="password">Password:</label>
                                <input type="password" id="password" name="password" required>
                            </div>
                            <div class="auth-buttons">
                                <button type="submit" class="btn btn-primary" id="loginSubmitBtn">Login</button>
                                <button type="button" class="btn btn-secondary" id="registerBtn">Register</button>
                            </div>
                        </form>
                        <div class="auth-toggle">
                            <p>Don't have an account? <a href="#" id="showRegister">Register here</a></p>
                            <p id="showLogin" style="display: none;">Already have an account? <a href="#">Login here</a></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sync Status -->
            <div id="syncStatus" class="sync-status">
                <span id="syncText">Working offline</span>
                <div id="syncSpinner" class="sync-spinner" style="display: none;"></div>
            </div>

            <!-- Log Walk Tab -->
            <div id="logTab" class="tab-content active">
                <!-- Input Form Section -->
                <section class="input-section">
                    <div class="card form-card">
                        <div class="window-title">üìù Log Today's Walk</div>
                        <form id="walkForm" class="walk-form">
                            <div class="form-group">
                                <label for="date">Date:</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="distance">Distance:</label>
                                <input type="number" id="distance" name="distance" min="0" step="0.01" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="timeElapsed">Time Elapsed (minutes):</label>
                                <input type="number" id="timeElapsed" name="timeElapsed" min="1" step="0.1" required>
                            </div>
                            
                            <button type="submit" class="btn btn-primary">
                                <span class="btn-text">Log Walk</span>
                                <span class="btn-icon">üö∂&#xFE0E;</span>
                            </button>
                        </form>
                    </div>
                </section>

                <!-- Statistics Section -->
                <section class="stats-section">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üö∂</div>
                            <div class="stat-value" id="totalWalks">0</div>
                            <div class="stat-label">Total Walks</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üèÅ</div>
                            <div class="stat-value" id="totalDistance">0</div>
                            <div class="stat-label">Total Distance</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üî•</div>
                            <div class="stat-value" id="currentStreak">0</div>
                            <div class="stat-label">Current Streak</div>
                        </div>
                        
                        <div class="stat-card">
                            <div class="stat-icon">üèÜ</div>
                            <div class="stat-value" id="longestStreak">0</div>
                            <div class="stat-label">Longest Streak</div>
                        </div>
                    </div>
                </section>

                <!-- Weekly Comparison Section -->
                <!--<section class="weekly-comparison-section">
                    <div class="card">
                        <div class="window-title">üìä This Week vs Last Week</div>
                        <div id="weekComparison" class="week-comparison-container"></div>
                    </div>
                </section> -->

                <!-- Recent Walks Section -->
                <section class="recent-section">
                    <div class="card">
                        <div class="window-title">‚è≥ Recent Walks</div>
                        <div class="section-header">
                            <button id="exportBtn" class="btn btn-secondary">
                                <span class="btn-text">Export CSV</span>
                                <span class="btn-icon">üíæ&#xFE0E;</span>
                            </button>
                            <button id="importBtn" class="btn btn-secondary">
                                <span class="btn-text">Import CSV</span>
                                <span class="btn-icon">üìÅ&#xFE0E;</span>
                            </button>
                        </div>
                        <div id="recentWalks" class="recent-walks"></div>
                    </div>
                </section>

                <!-- Delete All Section -->
                <section class="delete-all-section">
                    <div class="card">
                        <div class="window-title">‚ö†Ô∏è Danger Zone</div>
                        <div class="delete-all-container">
                            <div class="win98-bubble">
                                <p class="delete-warning">It looks like you're trying to <b>permanently</b> delete all your walks from both local storage and the database. This action cannot be undone.</p>
                                <br>
                                
                                <button id="deleteAllBtn" class="btn btn-danger">
                                    <span class="btn-text"><b>Delete All Walks</b></span>
                                    <span class="btn-icon">‚ùå</span>
                                </button>
                                
                            </div>
                            <div class="clippy-container">
                                <img src="images/clippy.png" alt="Clippy" class="clippy_img">
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Visualizations Tab -->
            <div id="visualizationsTab" class="tab-content">
                <!-- Charts Section -->
                <section class="charts-section">
                    <div class="charts-grid">
                        <div class="card chart-card">
                            <h3>Distance Over Time</h3>
                            <canvas id="distanceChart"></canvas>
                        </div>
                        
                        <div class="card chart-card">
                            <h3>Time vs Distance</h3>
                            <canvas id="timeDistanceChart"></canvas>
                        </div>
                        
                        <div class="card chart-card">
                            <h3>Moving Averages</h3>
                            <div class="chart-controls">
                                <button class="btn btn-secondary chart-toggle active" data-chart="distance">Distance</button>
                                <button class="btn btn-secondary chart-toggle" data-chart="pace">Pace</button>
                            </div>
                            <canvas id="movingAveragesChart"></canvas>
                        </div>
                        
                        <div class="card chart-card">
                            <h3>Pace Trends</h3>
                            <canvas id="paceTrendsChart"></canvas>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Leaderboard Tab -->
            <div id="leaderboardTab" class="tab-content">
                <section class="leaderboard-section">
                    <div class="card">
                        <div class="window-title">üèÜ Leaderboards</div>
                        <div class="leaderboard-controls">
                            <button class="btn btn-secondary leaderboard-toggle active" data-leaderboard="distance">Distance</button>
                            <button class="btn btn-secondary leaderboard-toggle" data-leaderboard="pace">Best Pace</button>
                        </div>
                        <div id="leaderboard" class="leaderboard"></div>
                    </div>
                </section>
            </div>

            <!-- Help Tab -->
            <div id="helpTab" class="tab-content">
                <section class="help-section">
                        <div class="delete-all-container">
                            <div class="win98-bubble">
                                <p class="help-dialog">‚ÑπÔ∏è It looks like you need help. I mean... its pretty simple I'm sure you can work it out for yourself. Give it a go... I believe in you!</p>
                                <br>
                                <div class="textInputCont">
                                    <input type="text" id="help-txt" name="help-txt">
                                </div>
                                <br>
                                <div class="bubble-btn-container">
                                                                  
                                    <button id="btn-bubble-A" class="btn btn-bubble">Yes</button>
                                    <button id="btn-bubble-B" class="btn btn-bubble">Yes</button>
                                    <button id="btn-bubble-C" class="btn btn-bubble">No</button>

                                    
                                </div>
                            </div>
                            <div class="clippy-container">
                                <img src="images/clippy.png" alt="Clippy" class="clippy_img">
                            </div>
                        </div>
                </section>
            </div>
        </main>

        <!-- Toast Notification -->
        <div id="toast" class="toast">
            <span id="toastMessage"></span>
        </div>

        <!-- Loading Spinner -->
        <div id="loadingSpinner" class="loading-spinner">
            <div class="spinner"></div>
        </div>

        <!-- Hidden file input for CSV import -->
        <input type="file" id="csvFileInput" accept=".csv" style="display: none;">
    </div>

    <!-- Windows 98 Style Confirmation Dialog -->
    <div id="confirmOverlay" class="confirm-overlay">
        <div class="confirm-dialog">
            <div class="confirm-header">
                <div>
                    <span class="confirm-icon">‚ö†Ô∏è</span>
                    <span id="confirmTitle">Confirm Action</span>
                </div>
            </div>
            <div class="confirm-body">
                <div class="confirm-warning-icon">‚ö†Ô∏è</div>
                <div class="confirm-message" id="confirmMessage">
                    Are you sure you want to proceed?
                </div>
            </div>
            <div class="confirm-buttons">
                <button class="confirm-btn primary" id="confirmYes">Yes</button>
                <button class="confirm-btn" id="confirmNo">No</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
